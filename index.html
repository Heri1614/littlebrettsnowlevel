<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>LittleBrett Game</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      background-color: black;
    }
    canvas {
      display: block;
      width: 100vw;
      height: 100vh;
    }
    #startButton {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 25vw;
      max-width: 300px;
      z-index: 10;
      cursor: pointer;
      display: none;
    }
  </style>
</head>
<body>

  <img id="startButton" src="btn_start.png" alt="Start">
  <canvas id="gameCanvas"></canvas>
  <img id="invokeButton" src="invoke_btn.png" style="display: none; position: absolute; bottom: 20px; left: 20px; width: 70px; cursor: pointer; z-index: 20;">

  <script>
    const startButton = document.getElementById('startButton');
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const bgForest = new Image(); bgForest.src = 'bg_forest.png';
    const brettIdle = new Image(); brettIdle.src = 'brett_idle.png';
    const brettWalk = new Image(); brettWalk.src = 'brett_walk1.png';
    const brettJump = new Image(); brettJump.src = 'brett_jump.png';
    const brettFall = new Image(); brettFall.src = 'brett_fall.png';
    const bullFire = new Image(); bullFire.src = 'bull_fire.png';

    const enemy = {
      x: 400, y: 460, width: 50, height: 60, speed: 2.5, direction: 1,
      alive: true, exploding: false, explosionTimer: 0,
      img: new Image()
    };
    enemy.img.src = 'enemy1.png';

    const explosionImg = new Image();
    explosionImg.src = 'explosion.png';
    let explosionLoaded = false;
    explosionImg.onload = () => {
      explosionLoaded = true;
      startButton.style.display = 'block';  // ‚úÖ Mostrar bot√≥n cuando todo cargue
    };

    const coins = [
      { "x": 245, "y": 370, "type": "btc", "value": 50, "collected": false },
      { "x": 345, "y": 370, "type": "eth", "value": 30, "collected": false },
      { "x": 445, "y": 370, "type": "coin", "value": 20, "collected": false },
      { "x": 545, "y": 370, "type": "btc", "value": 50, "collected": false },
      { "x": 645, "y": 370, "type": "eth", "value": 30, "collected": false },
      { "x": 745, "y": 370, "type": "coin", "value": 20, "collected": false },
      { "x": 845, "y": 370, "type": "btc", "value": 50, "collected": false },
      { "x": 945, "y": 370, "type": "eth", "value": 30, "collected": false },
      { "x": 1045, "y": 370, "type": "coin", "value": 20, "collected": false },
      { "x": 1145, "y": 370, "type": "btc", "value": 50, "collected": false },
    ];

    const coinImages = {
      coin: new Image(),
      eth: new Image(),
      btc: new Image()
    };
    coinImages.coin.src = 'coin.png';
    coinImages.eth.src = 'eth.png';
    coinImages.btc.src = 'btc.png';

    let score = 0;
    let bullActive = false;
    let bullX = -200;
    let bullSpeed = 15;
    let bullCharges = 0;
    const invokeButton = document.getElementById('invokeButton');

    function checkInvokeButton() {
      invokeButton.style.display = bullCharges > 0 ? 'block' : 'none';
    }

    invokeButton.onclick = () => {
      if (!bullActive && bullCharges > 0) {
        bullActive = true;
        bullX = -200;
        bullCharges--;
        console.log(`üêÇ Toro invocado. Cargas restantes: ${bullCharges}`);
      }
    };

    // ‚úÖ Plataforma en zig-zag con troncos
    const platforms = [];
    const platformCount = 50;
    let x = 200;
    let y = 400;
    let direction = -1;

    for (let i = 0; i < platformCount; i++) {
      const isLog = i % 5 === 0;
      platforms.push({
        x: x,
        y: y,
        width: 120,
        height: 20,
        img: isLog ? "log.png" : "Platform_small.png",
        type: isLog ? "log" : "normal",
        triggered: false,
        timer: 0
      });

      x += 130;
      y += direction * 40;

      if (i % 4 === 0) direction *= -1;
      if (y < 200) y = 200;
      if (y > 450) y = 450;
    }

    const platformImages = {};
    for (const p of platforms) {
      if (!platformImages[p.img]) {
        platformImages[p.img] = new Image();
        platformImages[p.img].src = p.img;
      }
    }

    let currentSprite = brettIdle;
    let brettX = 400, brettY = 380, velocityY = 0;
    let isJumping = false, isFalling = false;
    let moveLeft = false, moveRight = false;
    let gameStarted = false;

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      if (gameStarted) drawGame();
    }

    window.addEventListener('resize', resizeCanvas);

    startButton.onclick = () => {
      gameStarted = true;
      startButton.style.display = 'none';
      resizeCanvas();
      gameLoop();
    };

    // ... el resto del script sigue igual (drawGame, gameLoop, teclas, etc.)

  </script>
</body>
</html>
