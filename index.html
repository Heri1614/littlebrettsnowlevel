<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LittleBrett Snow Level</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      overflow: hidden;
    }
    canvas {
      display: block;
      background: url('bg_forest.png') no-repeat center center;
      background-size: cover;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;const images = {};
const imageFiles = [
  'brett_idle.png', 'brett_jump.png', 'brett_walk1.png',
  'Platform_small.png', 'Platform_tall.png',
  'enemy1.png'
];

let loadedImages = 0;
for (const file of imageFiles) {
  images[file] = new Image();
  images[file].src = file;
  images[file].onload = () => {
    loadedImages++;
    if (loadedImages === imageFiles.length) init();
  };
}

const player = {
  x: 100,
  y: canvas.height - 300,
  width: 50,
  height: 50,
  vx: 0,
  vy: 0,
  jumping: false,
  onGround: false,
};

const gravity = 0.5;
const platforms = [
  { x: 100, y: canvas.height - 100, w: 100, h: 20, img: 'Platform_tall.png' },
  { x: 300, y: canvas.height - 200, w: 80, h: 20, img: 'Platform_small.png' },
  { x: 500, y: canvas.height - 300, w: 100, h: 20, img: 'Platform_tall.png' },
];

const enemies = [
  { x: 600, y: canvas.height - 320, w: 40, h: 40, dir: 1, range: 60, baseX: 600 },
  { x: 800, y: canvas.height - 220, w: 40, h: 40, dir: -1, range: 80, baseX: 800 },
];

const keys = {};
window.addEventListener("keydown", e => keys[e.code] = true);
window.addEventListener("keyup", e => keys[e.code] = false);

function update() {
  player.vx = 0;
  if (keys["ArrowLeft"]) player.vx = -5;
  if (keys["ArrowRight"]) player.vx = 5;
  if (keys["Space"] && player.onGround) {
    player.vy = -12;
    player.jumping = true;
    player.onGround = false;
  }

  player.vy += gravity;
  player.x += player.vx;
  player.y += player.vy;

  player.onGround = false;
  for (const p of platforms) {
    if (
      player.x < p.x + p.w &&
      player.x + player.width > p.x &&
      player.y + player.height < p.y + 20 &&
      player.y + player.height > p.y &&
      player.vy > 0
    ) {
      player.y = p.y - player.height;
      player.vy = 0;
      player.onGround = true;
    }
  }

  for (const e of enemies) {
    e.x += e.dir * 2;
    if (e.x > e.baseX + e.range || e.x < e.baseX - e.range) e.dir *= -1;
  }
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  for (const p of platforms) {
    ctx.drawImage(images[p.img], p.x, p.y - 20, p.w, p.h);
  }

  for (const e of enemies) {
    ctx.drawImage(images['enemy1.png'], e.x, e.y, e.w, e.h);
  }

  const img = player.vy < 0 ? images['brett_jump.png'] : player.vx !== 0 ? images['brett_walk1.png'] : images['brett_idle.png'];
  ctx.drawImage(img, player.x, player.y, player.width, player.height);
}

function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

function init() {
  gameLoop();
}

  </script>
</body>
</html>
