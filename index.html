<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LittleBrett Snow Level</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
    #startButton {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
      cursor: pointer;
    }
    #controls {
      position: absolute;
      bottom: 10px;
      width: 100%;
      display: flex;
      justify-content: space-around;
      z-index: 10;
    }
    #controls img {
      width: 60px;
      height: 60px;
    }
  </style>
</head>
<body>
  <img id="startButton" src="btn_start.png" onclick="startGame()" />
  <div id="controls" style="display:none">
    <img src="btn_left.png" id="leftBtn" />
    <img src="btn_jump.png" id="jumpBtn" />
    <img src="btn_right.png" id="rightBtn" />
  </div>
  <canvas id="gameCanvas"></canvas>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;const keys = {
  left: false,
  right: false,
  jump: false
};

const images = {};
const imageFiles = [
  "bg_forest.png", "platform_ice.png", "platform_small.png", "platform_tall.png",
  "brett_idle.png", "brett_walk1.png", "brett_jump.png", "brett_fall.png",
  "brett_happy.png", "brett_down.png",
  "coin.png", "btc.png", "eth.png"
];

let player, platforms, coins;
let scrollX = 0;

function loadImages(files, callback) {
  let loaded = 0;
  files.forEach((file) => {
    const img = new Image();
    img.src = file;
    img.onload = () => {
      images[file] = img;
      loaded++;
      if (loaded === files.length) callback();
    };
  });
}

class Player {
  constructor() {
    this.x = 100;
    this.y = canvas.height - 200;
    this.width = 60;
    this.height = 60;
    this.vx = 0;
    this.vy = 0;
    this.onGround = false;
  }

  draw() {
    ctx.drawImage(images["brett_idle.png"], this.x - scrollX, this.y, this.width, this.height);
  }

  update() {
    this.vx = 0;
    if (keys.left) this.vx = -5;
    if (keys.right) this.vx = 5;
    if (keys.jump && this.onGround) {
      this.vy = -15;
      this.onGround = false;
    }

    this.vy += 0.8; // Gravity
    this.x += this.vx;
    this.y += this.vy;

    // Ground/platform collision
    this.onGround = false;
    for (let platform of platforms) {
      if (
        this.x + this.width > platform.x &&
        this.x < platform.x + platform.width &&
        this.y + this.height > platform.y &&
        this.y + this.height < platform.y + platform.height &&
        this.vy >= 0
      ) {
        this.y = platform.y - this.height;
        this.vy = 0;
        this.onGround = true;
      }
    }

    scrollX = this.x - 100;
  }
}

class Platform {
  constructor(x, y, type) {
    this.x = x;
    this.y = y;
    this.width = 100;
    this.height = 20;
    this.image = images[type];
  }

  draw() {
    ctx.drawImage(this.image, this.x - scrollX, this.y, this.width, this.height);
  }
}

class Coin {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.width = 30;
    this.height = 30;
    this.image = images["coin.png"];
  }

  draw() {
    ctx.drawImage(this.image, this.x - scrollX, this.y, this.width, this.height);
  }
}

function startGame() {
  document.getElementById("startButton").style.display = "none";
  document.getElementById("controls").style.display = "flex";
  player = new Player();
  platforms = [
    new Platform(0, canvas.height - 60, "platform_ice.png"),
    new Platform(250, canvas.height - 150, "platform_small.png"),
    new Platform(500, canvas.height - 250, "platform_tall.png")
  ];
  coins = [new Coin(520, canvas.height - 280)];
  animate();
}

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.drawImage(images["bg_forest.png"], 0 - scrollX * 0.5, 0, canvas.width, canvas.height);
  for (let p of platforms) p.draw();
  for (let c of coins) c.draw();
  player.update();
  player.draw();
  requestAnimationFrame(animate);
}

window.addEventListener("keydown", (e) => {
  if (e.key === "ArrowLeft") keys.left = true;
  if (e.key === "ArrowRight") keys.right = true;
  if (e.key === " " || e.key === "ArrowUp") keys.jump = true;
});

window.addEventListener("keyup", (e) => {
  if (e.key === "ArrowLeft") keys.left = false;
  if (e.key === "ArrowRight") keys.right = false;
  if (e.key === " " || e.key === "ArrowUp") keys.jump = false;
});

document.getElementById("leftBtn").addEventListener("touchstart", () => (keys.left = true));
document.getElementById("leftBtn").addEventListener("touchend", () => (keys.left = false));
document.getElementById("rightBtn").addEventListener("touchstart", () => (keys.right = true));
document.getElementById("rightBtn").addEventListener("touchend", () => (keys.right = false));
document.getElementById("jumpBtn").addEventListener("touchstart", () => (keys.jump = true));
document.getElementById("jumpBtn").addEventListener("touchend", () => (keys.jump = false));

loadImages(imageFiles, () => {
  console.log("All assets loaded");
});

  </script>
</body>
</html>
