<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LittleBrett Snow Level</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body, html { overflow: hidden; height: 100%; background: #000; }
    canvas { display: block; margin: 0 auto; background: url('bg_forest.png') repeat-y center top; background-size: cover; }
    #invokeBtn {
      position: absolute;
      top: 10px;
      left: 10px;
      display: none;
      z-index: 10;
    }
  </style>
</head>
<body>
  <img id="invokeBtn" src="invoke_btn.png" width="100" height="50" onclick="invokeBull()" />
  <canvas id="gameCanvas" width="800" height="600"></canvas>  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const bg = new Image(); bg.src = 'bg_forest.png';
    const brett = { x: 100, y: 500, width: 50, height: 50, dy: 0, grounded: false };
    const brettImg = new Image(); brettImg.src = 'brett_idle.png';
    const platformTall = new Image(); platformTall.src = 'Platform_tall.png';
    const platformSmall = new Image(); platformSmall.src = 'Platform_small.png';
    const coin = new Image(); coin.src = 'coin.png';
    const btc = new Image(); btc.src = 'btc.png';
    const eth = new Image(); eth.src = 'eth.png';
    const enemyImg = new Image(); enemyImg.src = 'enemy1.png';
    const bullFire = new Image(); bullFire.src = 'bull_fire.png';

    let score = 0;
    let bullActive = false;
    let bullX = -100;
    const gravity = 0.8;
    const jumpPower = -15;
    let keys = {};

    const platforms = [];
    for (let i = 0; i < 40; i++) {
      platforms.push({
        x: 100 + i * 150,
        y: 550 - (i % 5) * 80,
        type: i % 2 === 0 ? 'tall' : 'small'
      });
    }

    const coins = platforms.map((p, i) => ({ x: p.x + 20, y: p.y - 30, type: i % 3 === 0 ? 'btc' : i % 3 === 1 ? 'eth' : 'coin' }));

    const enemies = [
      { x: 500, y: 520, dx: 2 },
      { x: 1000, y: 480, dx: -2 },
      { x: 1600, y: 460, dx: 2 },
      { x: 2200, y: 440, dx: -2 },
      { x: 2800, y: 420, dx: 2 },
      { x: 3400, y: 400, dx: -2 }
    ];

    function invokeBull() {
      if (score >= 200) {
        score -= 200;
        bullActive = true;
        bullX = -100;
        document.getElementById('invokeBtn').style.display = 'none';
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(bg, 0, 0, canvas.width, canvas.height);

      // Camera
      ctx.save();
      ctx.translate(-brett.x + 100, 0);

      // Platforms
      platforms.forEach(p => {
        const img = p.type === 'tall' ? platformTall : platformSmall;
        ctx.drawImage(img, p.x, p.y);
      });

      // Coins
      coins.forEach(c => {
        let img = coin;
        if (c.type === 'btc') img = btc;
        else if (c.type === 'eth') img = eth;
        ctx.drawImage(img, c.x, c.y, 30, 30);
      });

      // Enemies
      enemies.forEach(e => {
        ctx.drawImage(enemyImg, e.x, e.y, 50, 50);
      });

      // Bull
      if (bullActive) {
        ctx.drawImage(bullFire, bullX, 500, 100, 100);
        bullX += 8;
        if (bullX > brett.x + 800) bullActive = false;
      }

      // Brett
      ctx.drawImage(brettImg, brett.x, brett.y, brett.width, brett.height);

      ctx.restore();
    }

    function update() {
      brett.dy += gravity;
      brett.y += brett.dy;

      if (keys['Space'] && brett.grounded) {
        brett.dy = jumpPower;
        brett.grounded = false;
      }
      if (keys['ArrowRight']) brett.x += 5;
      if (keys['ArrowLeft']) brett.x -= 5;

      brett.grounded = false;
      platforms.forEach(p => {
        if (
          brett.x + brett.width > p.x &&
          brett.x < p.x + 80 &&
          brett.y + brett.height < p.y + 20 &&
          brett.y + brett.height > p.y - 10
        ) {
          brett.y = p.y - brett.height;
          brett.dy = 0;
          brett.grounded = true;
        }
      });

      // Coin collection
      coins.forEach((c, i) => {
        if (
          brett.x < c.x + 30 &&
          brett.x + brett.width > c.x &&
          brett.y < c.y + 30 &&
          brett.y + brett.height > c.y
        ) {
          score += c.type === 'btc' ? 50 : c.type === 'eth' ? 30 : 10;
          coins.splice(i, 1);
        }
      });

      // Enemy collision
      enemies.forEach((e, i) => {
        e.x += e.dx;
        if (e.x < 0 || e.x > 5000) e.dx *= -1;

        if (
          brett.x < e.x + 50 &&
          brett.x + brett.width > e.x &&
          brett.y < e.y + 50 &&
          brett.y + brett.height > e.y
        ) {
          location.reload();
        }

        if (bullActive && bullX + 100 > e.x && bullX < e.x + 50) {
          enemies.splice(i, 1);
        }
      });

      if (score >= 200) document.getElementById('invokeBtn').style.display = 'block';
    }

    function gameLoop() {
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    document.addEventListener('keydown', e => keys[e.code] = true);
    document.addEventListener('keyup', e => keys[e.code] = false);

    gameLoop();
  </script></body>
</html>
