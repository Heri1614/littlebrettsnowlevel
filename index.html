<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LittleBrett Snow Level</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body, html { overflow: hidden; height: 100%; }
    canvas { display: block; background: url('bg_forest.png') repeat-x; background-size: cover; }
    #mobile-controls {
      position: absolute;
      bottom: 20px;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 20px;
      z-index: 2;
    }
    #mobile-controls img {
      width: 60px;
      height: 60px;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <div id="mobile-controls">
    <img src="btn_left.png" id="btnLeft">
    <img src="btn_right.png" id="btnRight">
    <img src="btn_jump.png" id="btnJump">
  </div>  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const gravity = 1.5;
    let score = 0;
    let showInvoke = false;

    const background = new Image();
    background.src = 'bg_forest.png';

    const brett = new Image();
    brett.src = 'brett_idle.png';

    const coinImg = new Image();
    coinImg.src = 'coin.png';

    const platformTall = new Image();
    platformTall.src = 'Platform_tall.png';

    const platformSmall = new Image();
    platformSmall.src = 'Platform_small.png';

    const groundY = canvas.height - 150;

    const brettPlayer = {
      x: 100,
      y: groundY - 80,
      width: 60,
      height: 80,
      dy: 0,
      dx: 0,
      jumping: false
    };

    const keys = { left: false, right: false, up: false };

    document.addEventListener('keydown', (e) => {
      if (e.code === 'ArrowLeft') keys.left = true;
      if (e.code === 'ArrowRight') keys.right = true;
      if (e.code === 'Space' && !brettPlayer.jumping) {
        brettPlayer.dy = -20;
        brettPlayer.jumping = true;
      }
    });
    document.addEventListener('keyup', (e) => {
      if (e.code === 'ArrowLeft') keys.left = false;
      if (e.code === 'ArrowRight') keys.right = false;
    });

    document.getElementById('btnLeft').ontouchstart = () => keys.left = true;
    document.getElementById('btnLeft').ontouchend = () => keys.left = false;
    document.getElementById('btnRight').ontouchstart = () => keys.right = true;
    document.getElementById('btnRight').ontouchend = () => keys.right = false;
    document.getElementById('btnJump').ontouchstart = () => {
      if (!brettPlayer.jumping) {
        brettPlayer.dy = -20;
        brettPlayer.jumping = true;
      }
    };

    const platforms = [
      { x: 200, y: groundY - 120, img: platformSmall },
      { x: 400, y: groundY - 200, img: platformTall },
      { x: 700, y: groundY - 120, img: platformSmall },
      { x: 1000, y: groundY - 180, img: platformTall }
    ];

    const coins = [
      { x: 210, y: groundY - 150 },
      { x: 420, y: groundY - 230 },
      { x: 710, y: groundY - 150 },
      { x: 1020, y: groundY - 210 }
    ];

    let scrollX = 0;

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(background, -scrollX, 0, canvas.width, canvas.height);

      brettPlayer.x += (keys.right - keys.left) * 5;
      scrollX = brettPlayer.x - 100;

      brettPlayer.dy += gravity;
      brettPlayer.y += brettPlayer.dy;
      if (brettPlayer.y + brettPlayer.height >= groundY) {
        brettPlayer.y = groundY - brettPlayer.height;
        brettPlayer.dy = 0;
        brettPlayer.jumping = false;
      }

      ctx.drawImage(brett, brettPlayer.x - scrollX, brettPlayer.y, brettPlayer.width, brettPlayer.height);

      platforms.forEach(p => {
        ctx.drawImage(p.img, p.x - scrollX, p.y);
        if (
          brettPlayer.x + brettPlayer.width > p.x &&
          brettPlayer.x < p.x + 100 &&
          brettPlayer.y + brettPlayer.height > p.y &&
          brettPlayer.y + brettPlayer.height < p.y + 10 &&
          brettPlayer.dy >= 0
        ) {
          brettPlayer.y = p.y - brettPlayer.height;
          brettPlayer.dy = 0;
          brettPlayer.jumping = false;
        }
      });

      coins.forEach((c, i) => {
        ctx.drawImage(coinImg, c.x - scrollX, c.y, 30, 30);
        if (
          brettPlayer.x < c.x + 30 &&
          brettPlayer.x + brettPlayer.width > c.x &&
          brettPlayer.y < c.y + 30 &&
          brettPlayer.y + brettPlayer.height > c.y
        ) {
          coins.splice(i, 1);
          score += 50;
          if (score >= 200) showInvoke = true;
        }
      });

      ctx.fillStyle = 'white';
      ctx.font = '20px Arial';
      ctx.fillText('Score: ' + score, 20, 30);

      requestAnimationFrame(draw);
    }

    draw();
  </script></body>
</html>
